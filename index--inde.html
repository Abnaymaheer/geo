<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title> Rako Cyber - WebView Mode </title>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<style>
body { margin: 0; font-family: 'Segoe UI', sans-serif; background: #f0f2f5; }
#map { height: 100vh; }
.popup-box { font-size: 14px; line-height: 1.4; }
.popup-box b { color: #007bff; }
</style>
</head>
<body>

<div id="map"></div>

<script>
// Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ø¹Ù„Ù‰ Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø§Ù„Ù…ØºØ±Ø¨ (MA)
const map = L.map("map").setView([31.7917, -7.0926], 6);

L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{y}.png", {
  attribution: "Â© OpenStreetMap"
}).addTo(map);

const userIcon = L.icon({
  iconUrl: "https://cdn-icons-png.flaticon.com/512/1077/1077114.png",
  iconSize: [32, 32],
  iconAnchor: [16, 32]
});

// ÙˆØ¸ÙŠÙØ© Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ¹Ø±Ø¶Ù‡Ø§
function loadTargets() {
    fetch("users.json")
      .then(r => r.json())
      .then(users => {
        users.forEach(u => {
          L.marker([u.lat, u.lon], { icon: userIcon })
            .addTo(map)
            .bindPopup(`
              <div class="popup-box">
                <b>ğŸ“ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©:</b> ${u.City || "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙØ©"}<br>
                <b>ğŸŒ Ø§Ù„Ù…Ø²ÙˆØ¯:</b> ${u.org}<br>
                <div class="time">â° ${u.time}</div>
              </div>
            `);
        });
      }).catch(e => console.log("Waiting for data..."));
}

// ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø®Ø±ÙŠØ·Ø© ÙƒÙ„ 5 Ø«ÙˆØ§Ù†Ù Ù„Ø±Ø¤ÙŠØ© Ø§Ù„Ø¶Ø­Ø§ÙŠØ§ Ø§Ù„Ø¬Ø¯Ø¯ ÙÙˆØ±Ø§Ù‹
setInterval(loadTargets, 5000);
loadTargets();
</script>

</body>
</html>
